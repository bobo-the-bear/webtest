<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Beat Up Bear</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            font-family: Arial, sans-serif;
        }

        .container {
            text-align: center;
        }

        .bear-container {
            position: relative;
            display: inline-block;
            cursor: pointer;
            transition: transform 0.1s;
        }

        .bear-container:active {
            transform: scale(0.95);
        }

        .bear-image {
            width: 400px;
            height: 400px;
            object-fit: contain;
            filter: drop-shadow(0 10px 30px rgba(0, 0, 0, 0.3));
        }

        .bat {
            position: absolute;
            width: 300px;
            height: auto;
            top: 50%;
            left: -350px;
            transform-origin: bottom right;
            pointer-events: none;
            opacity: 0;
            z-index: 10;
        }

        .hit-counter {
            margin-top: 20px;
            color: white;
            font-size: 24px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .instructions {
            margin-top: 10px;
            color: rgba(255, 255, 255, 0.8);
            font-size: 16px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0) rotate(0deg); }
            25% { transform: translateX(-10px) rotate(-5deg); }
            75% { transform: translateX(10px) rotate(5deg); }
        }

        .shake {
            animation: shake 0.3s;
        }

        @keyframes batSwing {
            0% {
                left: -350px;
                top: -20%;
                transform: rotate(-90deg);
                opacity: 0;
            }
            20% {
                opacity: 1;
            }
            50% {
                left: 50%;
                top: -10%;
                transform: rotate(0deg) translateX(-50%);
            }
            70% {
                left: 50%;
                top: -10%;
                transform: rotate(0deg) translateX(-50%);
            }
            100% {
                left: 120%;
                top: -20%;
                transform: rotate(90deg);
                opacity: 0;
            }
        }

        .bat-swing {
            animation: batSwing 0.6s ease-out;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="bear-container" id="bearContainer">
            <img id="bat" class="bat" src="baseball-bat-png-clipart-3.png" alt="Baseball Bat">
            <img id="bearImage" class="bear-image" src="" alt="Bear">
        </div>
        <div class="hit-counter" id="hitCounter">Hits: 0</div>
        <div class="instructions">Click the bear to hit him! He'll heal after 30 seconds.</div>
    </div>

    <script>
        const bearStates = [
            'b1_base.png',
            'b13.png',
            'b132.png',
            'b134.png',
            'b135.png',
            'b136.png',
            'b137.png',
            'b138.png',
            'b139.png'
        ];

        const soundEffects = [
            'punch-3.mp3',
            'weak-punch.mp3',
            'punch-notification_sound-493565.mp3',
            'punch_u4LmMsr.mp3',
            'punch-sound-effect-meme__1_.mp3',
            'punch-gaming-sound-effect-hd_RzlG1GE.mp3'
        ];

        let currentState = 0;
        let hitCount = 0;
        let healTimer = null;
        let currentSoundIndex = 0;

        const bearImage = document.getElementById('bearImage');
        const bearContainer = document.getElementById('bearContainer');
        const hitCounter = document.getElementById('hitCounter');
        const bat = document.getElementById('bat');
        const audio = new Audio();

        // Initialize with base image
        updateBearImage();

        function updateBearImage() {
            bearImage.src = bearStates[currentState];
        }

        function resetHealTimer() {
            // Clear existing timer
            if (healTimer) {
                clearTimeout(healTimer);
            }

            // Set new timer for 30 seconds
            healTimer = setTimeout(() => {
                currentState = 0;
                hitCount = 0;
                updateBearImage();
                updateHitCounter();
            }, 30000);
        }

        function updateHitCounter() {
            hitCounter.textContent = `Hits: ${hitCount}`;
        }

        bearContainer.addEventListener('click', () => {
            // Trigger bat swing
            bat.classList.remove('bat-swing');
            void bat.offsetWidth; // Force reflow to restart animation
            bat.classList.add('bat-swing');

            // Add shake animation to bear (delayed to sync with bat hit)
            setTimeout(() => {
                // Play sound effect
                audio.src = soundEffects[currentSoundIndex];
                audio.play().catch(e => console.log('Audio play failed:', e));
                
                // Cycle to next sound effect
                currentSoundIndex = (currentSoundIndex + 1) % soundEffects.length;

                bearContainer.classList.add('shake');
                setTimeout(() => {
                    bearContainer.classList.remove('shake');
                }, 300);

                // Randomly select a damaged state (1-8, excluding base state 0)
                currentState = Math.floor(Math.random() * (bearStates.length - 1)) + 1;

                hitCount++;
                updateBearImage();
                updateHitCounter();
                resetHealTimer();
            }, 300); // Delay to sync with bat hitting
        });

        // Start initial heal timer
        resetHealTimer();
    </script>
</body>
</html>
